# –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Chatterbox

Chatterbox ‚Äî —ç—Ç–æ **–î–∏–∞–ª–µ–∫—Ç–∏—á–µ—Å–∫–∏–π –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –î–≤–∏–∂–æ–∫**, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á–∏ –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º —Å–æ—Å—Ç—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞ (adversarial collaboration). –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ –æ–¥–Ω—É –º–æ–¥–µ–ª—å, –æ–Ω –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –¥–µ–±–∞—Ç—ã –º–µ–∂–¥—É —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏, –∏–º–∏—Ç–∏—Ä—É—è –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –Ω–∞—É—á–Ω–æ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–µ.

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –î–∏–∞–ª–æ–≥–∞

–°–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –¥–∏–∞–ª–µ–∫—Ç–∏—á–µ—Å–∫–∏–π —Ü–∏–∫–ª, –≥–¥–µ –∏–¥–µ–∏ –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç—Å—è, –∂–µ—Å—Ç–∫–æ –∫—Ä–∏—Ç–∏–∫—É—é—Ç—Å—è, –æ—Ü–µ–Ω–∏–≤–∞—é—Ç—Å—è –∏, –Ω–∞–∫–æ–Ω–µ—Ü, –¥–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è.

```mermaid
graph TD
    User[–ó–∞–¥–∞—á–∞ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è] -->|–í–≤–æ–¥| Promoter(–ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä)
    Promoter -->|–ì–∏–ø–æ—Ç–µ–∑–∞ –∏ –ö–æ–¥| Skeptic(–°–∫–µ–ø—Ç–∏–∫)
    Skeptic -->|–ö—Ä–∏—Ç–∏–∫–∞ –∏ –ö–æ–Ω—Ç—Ä-–ø—Ä–∏–º–µ—Ä—ã| Moderator{–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä}
    Moderator -->|–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –î–µ–±–∞—Ç—ã| Promoter
    Moderator -->|–ö–æ–Ω—Å–µ–Ω—Å—É—Å –î–æ—Å—Ç–∏–≥–Ω—É—Ç| Formalizer(–§–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä)
    Formalizer -->|–ö–æ–¥ Lean 4| Lean[–°–µ—Ä–≤–µ—Ä Lean]
    Lean -->|–†–µ–∑—É–ª—å—Ç–∞—Ç –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏| Output[–§–∏–Ω–∞–ª—å–Ω—ã–π –û—Ç–≤–µ—Ç]
```

## üé≠ –†–æ–ª–∏ –ê–≥–µ–Ω—Ç–æ–≤

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —á–µ—Ç—ã—Ä–µ—Ö —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω, –∫–∞–∂–¥–∞—è —Å–æ —Å–≤–æ–µ–π —Ä–æ–ª—å—é –∏ "–ª–∏—á–Ω–æ—Å—Ç—å—é" (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –∏ –ø—Ä–æ–º–ø—Ç—ã):

### 1. üí° –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä (Promoter)
*   **–ú–æ–¥–µ–ª—å**: `google/gemini-2.0-flash-exp`
*   **–†–æ–ª—å**: –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–º–µ–ª—ã–µ –≥–∏–ø–æ—Ç–µ–∑—ã, –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ —Å–∏–º—É–ª—è—Ü–∏–∏ –Ω–∞ Python.
*   **–õ–∏—á–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π, –∏–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—å–Ω—ã–π.
*   **–§—É–Ω–∫—Ü–∏—è**: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∏ —É–ª—É—á—à–µ–Ω–∏—è.

### 2. üßê –°–∫–µ–ø—Ç–∏–∫ (Skeptic)
*   **–ú–æ–¥–µ–ª—å**: `deepseek-r1-distill-qwen-32b`
*   **–†–æ–ª—å**: –ë–µ–∑–∂–∞–ª–æ—Å—Ç–Ω–æ –∫—Ä–∏—Ç–∏–∫—É–µ—Ç –∏–¥–µ–∏ –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞. –ò—â–µ—Ç –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏, –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏ –æ—à–∏–±–∫–∏ "–Ω–∞ –µ–¥–∏–Ω–∏—Ü—É" (off-by-one).
*   **–õ–∏—á–Ω–æ—Å—Ç—å**: –ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω—ã–π, —Å—Ç—Ä–æ–≥–∏–π, –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π –∫ –¥–µ—Ç–∞–ª—è–º.
*   **–§—É–Ω–∫—Ü–∏—è**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏, –æ—Å–ø–∞—Ä–∏–≤–∞—è –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è.

### 3. ‚öñÔ∏è –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä (Moderator)
*   **–ú–æ–¥–µ–ª—å**: `google/gemini-2.0-flash-exp`
*   **–†–æ–ª—å**: –ù–∞–±–ª—é–¥–∞–µ—Ç –∑–∞ –¥–µ–±–∞—Ç–∞–º–∏. –†–µ—à–∞–µ—Ç, –∫–æ–≥–¥–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ü–∏—è –∑–∞—Ö–æ–¥–∏—Ç –≤ —Ç—É–ø–∏–∫, –∫–æ–≥–¥–∞ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –∫–æ–Ω—Å–µ–Ω—Å—É—Å –∏–ª–∏ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.
*   **–§—É–Ω–∫—Ü–∏—è**: –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Ç–æ–∫–æ–º —Ü–∏–∫–ª–∞ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ñ–∞–∑—É —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏.

### 4. üìê –§–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä (Formalizer)
*   **–ú–æ–¥–µ–ª—å**: `deepseek-prover-v2`
*   **–†–æ–ª—å**: –ü–µ—Ä–µ–≤–æ–¥–∏—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–µ –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –≤ —Å—Ç—Ä–æ–≥–∏–π –∫–æ–¥ Lean 4.
*   **–§—É–Ω–∫—Ü–∏—è**: –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –∏—Å—Ç–∏–Ω–Ω–æ—Å—Ç–∏ (ground-truth verification).

## üîÑ –î–∏–∞–ª–µ–∫—Ç–∏—á–µ—Å–∫–∏–π –¶–∏–∫–ª

–Ø–¥—Ä–æ–º Chatterbox —è–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `run_debate_cycle` –≤ `main.py`:

1.  **–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ (Proposal)**: **–ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä** –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –∏–ª–∏ —ç—Å–∫–∏–∑ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞.
2.  **–ö—Ä–∏—Ç–∏–∫–∞ (Critique)**: **–°–∫–µ–ø—Ç–∏–∫** –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏.
3.  **–û–±—Å—É–∂–¥–µ–Ω–∏–µ (Deliberation)**: **–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä** –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –æ–±–º–µ–Ω –º–Ω–µ–Ω–∏—è–º–∏.
    *   –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ -> –í–æ–∑–≤—Ä–∞—Ç –∫ –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
    *   –ï—Å–ª–∏ –ª–æ–≥–∏–∫–∞ –≤–µ—Ä–Ω–∞ -> –ü–µ—Ä–µ—Ö–æ–¥ –∫ –§–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏.
4.  **–§–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (Formalization)**: **–§–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä** –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É –≤ —Ç–µ–æ—Ä–µ–º—É Lean.
5.  **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (Verification)**: –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç **Lean Server** –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∫–æ–¥–∞.
    *   –ï—Å–ª–∏ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è -> –£—Å–ø–µ—Ö!
    *   –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ -> –û—à–∏–±–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Ü–∏–∫–ª (–¥–ª—è –±—É–¥—É—â–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π).

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

*   **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è**: –¶–∏–∫–ª –Ω–∞ Python, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –∏—Å—Ç–æ—Ä–∏–µ–π —Ä–∞–∑–≥–æ–≤–æ—Ä–∞.
*   **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Lean**: –ö–∞—Å—Ç–æ–º–Ω—ã–π `LeanServerProcess` –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å Lean 4 LSP (Language Server Protocol) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞ –Ω–∞ –ª–µ—Ç—É.
*   **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ü—Ä–æ–µ–∫—Ç–æ–º**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ–µ–∫—Ç Lean (`math_proofs`), –µ—Å–ª–∏ –æ–Ω –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.

## üåü –ü–æ—á–µ–º—É —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥?

–ë–æ–ª—å—à–∏–µ —è–∑—ã–∫–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ —á–∞—Å—Ç–æ "–≥–∞–ª–ª—é—Ü–∏–Ω–∏—Ä—É—é—Ç", –≤—ã–¥–∞–≤–∞—è –ø—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–Ω–æ –∑–≤—É—á–∞—â—É—é, –Ω–æ –Ω–µ–≤–µ—Ä–Ω—É—é –º–∞—Ç–µ–º–∞—Ç–∏–∫—É. –ó–∞—Å—Ç–∞–≤–ª—è—è **–°–∫–µ–ø—Ç–∏–∫–∞** –∫—Ä–∏—Ç–∏–∫–æ–≤–∞—Ç—å **–ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞**, –º—ã –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫. –î–æ–±–∞–≤–ª—è—è **–§–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä–∞**, –º—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º, —á—Ç–æ –∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ —É–±–µ–¥–∏—Ç–µ–ª–µ–Ω —Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω–æ.
